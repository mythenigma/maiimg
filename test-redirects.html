<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect Rules Test - MaiIMG</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        .test-link {
            display: block;
            padding: 12px 20px;
            margin: 10px 0;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.3s;
        }
        .test-link:hover {
            background: #0056b3;
        }
        .info {
            background: #e7f3ff;
            border: 1px solid #bee5eb;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”„ Cloudflare Pages é‡å†™è§„åˆ™æµ‹è¯•</h1>
        
        <div class="info">
            <h3>ğŸ“‹ æµ‹è¯•è¯´æ˜</h3>
            <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯• Cloudflare Pages çš„é‡å†™è§„åˆ™æ˜¯å¦æ­£ç¡®å·¥ä½œã€‚ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥æ¥æµ‹è¯•ä¸åŒçš„é‡å†™åœºæ™¯ã€‚</p>
        </div>

        <div class="test-section">
            <h3>ğŸ–¼ï¸ å›¾ç‰‡å±•ç¤ºé‡å†™æµ‹è¯•</h3>
            <p>æµ‹è¯• <code>/pic/ID</code> æ˜¯å¦æ­£ç¡®é‡å†™ä¸º <code>/view.html?id=ID</code></p>
            
            <a href="/pic/CF" class="test-link" target="_blank">æµ‹è¯•é“¾æ¥: /pic/CF (æ‚¨çš„å®é™…æ¡ˆä¾‹)</a>
            <a href="/pic/A" class="test-link" target="_blank">æµ‹è¯•é“¾æ¥: /pic/A</a>
            <a href="/pic/ABCD" class="test-link" target="_blank">æµ‹è¯•é“¾æ¥: /pic/ABCD</a>
            
            <div class="code">
                âœ… ä¿®å¤åçš„é¢„æœŸè¡Œä¸º:<br>
                /pic/CF â†’ /view.html?id=CF (åº”è¯¥èƒ½æ­£å¸¸åŠ è½½)<br>
                /pic/A â†’ /view.html?id=A<br>
                /pic/ABCD â†’ /view.html?id=ABCD
            </div>
            
            <div class="status error">
                <strong>âš ï¸ ä¹‹å‰çš„é—®é¢˜:</strong> /pic/CF è·³è½¬åˆ° /view è€Œä¸æ˜¯ /view.html?id=CF
            </div>
            
            <div class="status success">
                <strong>âœ… ä¿®å¤è¯´æ˜:</strong> ç®€åŒ–äº†é‡å†™è§„åˆ™è¯­æ³•ï¼Œç§»é™¤äº†å¯èƒ½å¯¼è‡´å†²çªçš„é…ç½®
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š è¿½è¸ªé¡µé¢é‡å†™æµ‹è¯•</h3>
            <p>æµ‹è¯• <code>/track/CODE</code> æ˜¯å¦æ­£ç¡®é‡å†™ä¸º <code>/tracking.html?id=CODE</code></p>
            
            <a href="/track/TEST123" class="test-link" target="_blank">æµ‹è¯•é“¾æ¥: /track/TEST123</a>
            <a href="/track/TRACK456" class="test-link" target="_blank">æµ‹è¯•é“¾æ¥: /track/TRACK456</a>
            
            <div class="code">
                é¢„æœŸè¡Œä¸º: /track/TEST123 â†’ /tracking.html?id=TEST123<br>
                é¢„æœŸè¡Œä¸º: /track/TRACK456 â†’ /tracking.html?id=TRACK456
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ  ä¸»é¡µé‡å†™æµ‹è¯•</h3>
            <p>æµ‹è¯•å…¶ä»–è·¯å¾„æ˜¯å¦æ­£ç¡®é‡å®šå‘åˆ°ä¸»é¡µ</p>
            
            <a href="/qr" class="test-link" target="_blank">æµ‹è¯•é“¾æ¥: /qr</a>
            <a href="/generate" class="test-link" target="_blank">æµ‹è¯•é“¾æ¥: /generate</a>
            <a href="/gallery" class="test-link" target="_blank">æµ‹è¯•é“¾æ¥: /gallery</a>
            
            <div class="code">
                é¢„æœŸè¡Œä¸º: /qr â†’ /index.html<br>
                é¢„æœŸè¡Œä¸º: /generate â†’ /index.html<br>
                é¢„æœŸè¡Œä¸º: /gallery â†’ /index.html
            </div>
        </div>

        <div class="info">
            <h3>âœ… éªŒè¯æ­¥éª¤</h3>
            <ol>
                <li>ç¡®ä¿ <code>_redirects</code> æ–‡ä»¶å·²ä¸Šä¼ åˆ° Cloudflare Pages</li>
                <li>éƒ¨ç½²æ‚¨çš„ç½‘ç«™åˆ° Cloudflare Pages</li>
                <li>ç‚¹å‡»ä¸Šé¢çš„æµ‹è¯•é“¾æ¥</li>
                <li>æ£€æŸ¥æµè§ˆå™¨åœ°å€æ æ˜¯å¦æ˜¾ç¤ºé‡å†™åçš„ URL</li>
                <li>æ£€æŸ¥é¡µé¢å†…å®¹æ˜¯å¦æ­£ç¡®åŠ è½½</li>
            </ol>
        </div>

        <div class="test-section">
            <h3>ğŸ› ï¸ è°ƒè¯•ä¿¡æ¯</h3>
            <p>å½“å‰é¡µé¢ä¿¡æ¯ï¼š</p>
            <div class="code" id="debug-info">
                <script>
                    document.getElementById('debug-info').innerHTML = `
                        <strong>å½“å‰ URL:</strong> ${window.location.href}<br>
                        <strong>åŸŸå:</strong> ${window.location.hostname}<br>
                        <strong>è·¯å¾„:</strong> ${window.location.pathname}<br>
                        <strong>æŸ¥è¯¢å‚æ•°:</strong> ${window.location.search}<br>
                        <strong>User-Agent:</strong> ${navigator.userAgent}
                    `;
                </script>
            </div>
        </div>

        <div class="info">
            <h3>ğŸ“ é…ç½®æ–‡ä»¶å†…å®¹</h3>
            <p>ä»¥ä¸‹æ˜¯ <code>_redirects</code> æ–‡ä»¶çš„å…³é”®å†…å®¹ï¼š</p>
            <div class="code">
# å›¾ç‰‡å±•ç¤ºé‡å†™è§„åˆ™<br>
/pic/:id               /view.html?id=:id           200<br><br>

# è¿½è¸ªé¡µé¢é‡å†™è§„åˆ™<br>
/track/:trackingCode   /tracking.html?id=:trackingCode   200<br><br>

# ä¸»é¡µé‡å†™è§„åˆ™<br>
/                      /index.html                 200<br>
/qr                    /index.html                 200<br>
/generate              /index.html                 200<br>
/gallery               /index.html                 200
            </div>
        </div>
    </div>
</body>
</html>
