<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            -webkit-user-select: none;
            user-select: none;
        }
        .wechat-hint-icon { font-size: 48px; margin-bottom: 16px; opacity: 0.9; }
        .wechat-hint-title { font-size: 22px; font-weight: 600; margin-bottom: 12px; line-height: 1.3; text-align: center; }
        .wechat-hint-desc { font-size: 15px; opacity: 0.95; margin-bottom: 8px; line-height: 1.5; text-align: center; }
        .wechat-hint-steps {
            font-size: 15px; font-weight: 500; margin-bottom: 20px; padding: 12px 16px;
            background: rgba(255,255,255,0.15); border-radius: 12px; line-height: 1.5; text-align: center;
        }
        .wechat-hint-img {
            max-width: 260px; width: 100%; height: auto; border-radius: 12px;
            margin-bottom: 20px; box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }
        .wechat-hint-buttons { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; }
        .wechat-hint-btn {
            background: rgba(255,255,255,0.25); border: 2px solid rgba(255,255,255,0.4);
            color: #fff; padding: 12px 24px; border-radius: 25px; font-size: 15px;
            cursor: pointer; transition: all 0.3s ease; backdrop-filter: blur(10px);
        }
        .wechat-hint-btn:hover { background: rgba(255,255,255,0.35); transform: translateY(-2px); }
        .wechat-hint-btn.primary { background: rgba(255,255,255,0.35); border-color: rgba(255,255,255,0.5); }
        #wechat-copy-toast { display: none; margin-top: 12px; font-size: 14px; opacity: 0.95; text-align: center; }
    </style>
</head>
<body>
    <div class="wechat-hint-icon">ğŸ“±</div>
    <div class="wechat-hint-title">è¯·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€</div>
    <div class="wechat-hint-desc">å½“å‰åœ¨å¾®ä¿¡å†…æ‰“å¼€ï¼Œå»ºè®®ç”¨æµè§ˆå™¨è·å¾—æ›´å¥½ä½“éªŒã€‚</div>
    <div class="wechat-hint-steps">ç‚¹å‡»å³ä¸Šè§’ <strong>â‹¯</strong> â†’ é€‰æ‹©ã€Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ã€</div>
    <img class="wechat-hint-img" id="wechat-hint-img" src="/wechat-guide.png" alt="æ“ä½œç¤ºæ„">
    <div class="wechat-hint-buttons">
        <button type="button" class="wechat-hint-btn primary" id="wechat-copy-btn">å¤åˆ¶é“¾æ¥</button>
        <button type="button" class="wechat-hint-btn" id="wechat-dismiss-btn">æˆ‘çŸ¥é“äº†</button>
    </div>
    <div id="wechat-copy-toast">å·²å¤åˆ¶ï¼Œè¯·ç²˜è´´åˆ°æµè§ˆå™¨ä¸­æ‰“å¼€</div>

    <script>
        (function() {
            // é€»è¾‘ï¼šæœ¬é¡µåªåœ¨ sendpdfonline.comã€‚å¾®ä¿¡å†…å§‹ç»ˆå±•ç¤ºæœ¬æŒ‡å¼•ï¼›éå¾®ä¿¡ä¸” URL å¸¦ #ID æ—¶å†™å…¥ localStorage å¹¶è·³ /gallery/ï¼Œç”± gallery è¯» ID å±•ç¤ºå›¾ç‰‡
            var STORAGE_KEY = 'maiimg_gallery_id'; // ä¸ gallery/index.html çš„ GALLERY_ID_STORAGE_KEY ä¸€è‡´
            var params = new URLSearchParams(window.location.search);
            var base = params.get('base') || (window.location.origin);
            var idRaw = (window.location.hash || '#').slice(1).replace(/^#/, '');
            var id = idRaw ? decodeURIComponent(idRaw) : '';
            base = base.replace(/\/$/, '');
            var isWeChat = /micromessenger/i.test(navigator.userAgent || '');

            if (id) {
                try { localStorage.setItem(STORAGE_KEY, id); } catch (e) {}
            }

            // æœ‰ ID æ—¶ï¼šè·³è½¬åˆ° gallery å±•ç¤ºå›¾ç‰‡ï¼ˆå¾®ä¿¡å†…ç”¨ sendpdfonline.comï¼Œéå¾®ä¿¡ç”¨ base æˆ–æœ¬åŸŸï¼‰
            if (id) {
                var host = (window.location.hostname || '').toLowerCase();
                var isSendpdf = host.indexOf('sendpdfonline.com') !== -1;
                var targetUrl;
                if (isWeChat) {
                    // å¾®ä¿¡å†…ï¼šåªå±•ç¤º sendpdfonline.com çš„ gallery
                    targetUrl = isSendpdf
                        ? (window.location.origin + '/gallery/')
                        : ('https://maiimg.sendpdfonline.com/gallery/#' + encodeURIComponent(id));
                } else if (base && base !== window.location.origin) {
                    // éå¾®ä¿¡ + base è·¨åŸŸï¼šè·³ base/gallery/#IDï¼ˆå¦‚ maiimg.comï¼‰
                    targetUrl = base + '/gallery/#' + encodeURIComponent(id);
                } else if (isSendpdf) {
                    targetUrl = window.location.origin + '/gallery/';
                } else {
                    targetUrl = window.location.origin + '/gallery/#' + encodeURIComponent(id);
                }
                window.location.replace(targetUrl);
                return;
            }

            // å¤åˆ¶é“¾æ¥ï¼šæœ¬åŸŸ /gallery/ï¼›è·¨åŸŸ base + /gallery/#ID
            var galleryUrl = id
                ? ((window.location.hostname || '').indexOf('sendpdfonline.com') !== -1 && (!base || base === window.location.origin)
                    ? (window.location.origin + '/gallery/')
                    : (base + '/gallery/#' + encodeURIComponent(id)))
                : (base + '/gallery/');

            var img = document.getElementById('wechat-hint-img');
            var copyBtn = document.getElementById('wechat-copy-btn');
            var dismissBtn = document.getElementById('wechat-dismiss-btn');
            var toast = document.getElementById('wechat-copy-toast');

            img.onerror = function() { img.style.display = 'none'; };

            function fallbackCopy(text) {
                var ta = document.createElement('textarea');
                ta.value = text;
                ta.style.position = 'fixed';
                ta.style.opacity = '0';
                document.body.appendChild(ta);
                ta.select();
                try {
                    document.execCommand('copy');
                    toast.style.display = 'block';
                    setTimeout(function() { toast.style.display = 'none'; }, 2500);
                } catch (e) {}
                document.body.removeChild(ta);
            }

            copyBtn.onclick = function() {
                var url = galleryUrl || (base + '/gallery/');
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(url).then(function() {
                        toast.style.display = 'block';
                        setTimeout(function() { toast.style.display = 'none'; }, 2500);
                    }).catch(function() { fallbackCopy(url); });
                } else {
                    fallbackCopy(url);
                }
            };

            dismissBtn.onclick = function() { };
        })();
    </script>
</body>
</html>
