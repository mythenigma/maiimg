<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flow Test - MaiIMG</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
        .step { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .success { background: #d4edda; border-left: 4px solid #28a745; }
        .error { background: #f8d7da; border-left: 4px solid #dc3545; }
        .info { background: #d1ecf1; border-left: 4px solid #17a2b8; }
        code { background: #f8f9fa; padding: 2px 6px; border-radius: 4px; }
        .test-btn { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        .test-btn:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>ğŸ” MaiIMG é‡å®šå‘æµç¨‹æµ‹è¯•</h1>
    
    <div class="info step">
        <h3>ğŸ“‹ å½“å‰æ–¹æ¡ˆç¡®è®¤</h3>
        <p><strong>æ–‡ä»¶ç»“æ„:</strong></p>
        <ul>
            <li><code>_redirects</code> - é‡å®šå‘è§„åˆ™æ–‡ä»¶</li>
            <li><code>pic-redirect.html</code> - JavaScript å¤„ç†é¡µé¢</li>
            <li><code>view.html</code> - åŸå§‹å›¾ç‰‡å±•ç¤ºé¡µé¢</li>
        </ul>
    </div>

    <div class="step">
        <h3>ğŸ”„ é¢„æœŸå·¥ä½œæµç¨‹</h3>
        <ol>
            <li>ç”¨æˆ·è®¿é—®: <code>https://maiimg.com/pic/CF</code></li>
            <li>Cloudflare Pages æ ¹æ® <code>_redirects</code> é‡å†™ä¸º: <code>/pic-redirect.html</code></li>
            <li><code>pic-redirect.html</code> çš„ JavaScript ä»åŸå§‹ URL æå– ID: <code>CF</code></li>
            <li>è‡ªåŠ¨é‡å®šå‘åˆ°: <code>/view.html?id=CF</code></li>
            <li><code>view.html</code> è§£æå‚æ•°å¹¶æ˜¾ç¤ºå›¾ç‰‡</li>
        </ol>
    </div>

    <div class="step">
        <h3>ğŸ§ª æµ‹è¯•é“¾æ¥</h3>
        <button class="test-btn" onclick="testRedirect('/pic/CF')">æµ‹è¯•: /pic/CF (çœŸå®æ¡ˆä¾‹)</button>
        <button class="test-btn" onclick="testRedirect('/pic/TEST123')">æµ‹è¯•: /pic/TEST123</button>
        <button class="test-btn" onclick="testRedirect('/pic/DEMO')">æµ‹è¯•: /pic/DEMO</button>
        <br><br>
        <button class="test-btn" onclick="testDirect('/pic-redirect.html')">ç›´æ¥æµ‹è¯•: pic-redirect.html</button>
        <button class="test-btn" onclick="testDirect('/view.html?id=DIRECT')">ç›´æ¥æµ‹è¯•: view.html?id=DIRECT</button>
    </div>

    <div id="test-results" class="step" style="display: none;">
        <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
        <div id="results-content"></div>
    </div>

    <div class="success step">
        <h3>âœ… ç¡®è®¤æ¸…å•</h3>
        <ul>
            <li>âœ… <code>_redirects</code> æ–‡ä»¶å†…å®¹: <code>/pic/* /pic-redirect.html 200</code></li>
            <li>âœ… <code>pic-redirect.html</code> åŒ…å« JavaScript é‡å®šå‘é€»è¾‘</li>
            <li>âœ… <code>view.html</code> èƒ½æ­£ç¡®è§£æ <code>?id=</code> å‚æ•°</li>
            <li>âœ… æ‰€æœ‰æ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•</li>
        </ul>
    </div>

    <div class="info step">
        <h3>ğŸš€ éƒ¨ç½²å‘½ä»¤</h3>
        <code>
            git add .<br>
            git commit -m "JavaScript é‡å®šå‘æ–¹æ¡ˆ - æœ€ç»ˆç‰ˆæœ¬"<br>
            git push origin main
        </code>
    </div>

    <script>
        function testRedirect(path) {
            const fullUrl = window.location.origin + path;
            const resultsDiv = document.getElementById('test-results');
            const contentDiv = document.getElementById('results-content');
            
            resultsDiv.style.display = 'block';
            contentDiv.innerHTML = `
                <p><strong>æµ‹è¯•é“¾æ¥:</strong> <a href="${path}" target="_blank">${fullUrl}</a></p>
                <p><strong>é¢„æœŸè¡Œä¸º:</strong> åº”è¯¥é‡å®šå‘åˆ° view.html å¹¶æ˜¾ç¤ºå¯¹åº”å›¾ç‰‡</p>
                <p><strong>ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥è¿›è¡Œæµ‹è¯•</strong></p>
            `;
        }

        function testDirect(path) {
            const fullUrl = window.location.origin + path;
            window.open(path, '_blank');
        }

        // æ˜¾ç¤ºå½“å‰é¡µé¢ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', function() {
            const infoDiv = document.createElement('div');
            infoDiv.className = 'step info';
            infoDiv.innerHTML = `
                <h3>ğŸ“ å½“å‰é¡µé¢ä¿¡æ¯</h3>
                <p><strong>URL:</strong> ${window.location.href}</p>
                <p><strong>åŸŸå:</strong> ${window.location.hostname}</p>
                <p><strong>æ—¶é—´:</strong> ${new Date().toLocaleString()}</p>
            `;
            document.body.appendChild(infoDiv);
        });
    </script>
</body>
</html>
